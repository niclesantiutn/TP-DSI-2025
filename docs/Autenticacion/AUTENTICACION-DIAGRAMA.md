# ğŸ“Š Diagrama de Flujo - Sistema de AutenticaciÃ³n

## ğŸ”„ Flujo Completo de AutenticaciÃ³n

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    SISTEMA DE AUTENTICACIÃ“N - HOTEL PREMIER             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   USUARIO   â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ 1. Accede a /cualquier-ruta
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Spring Security    â”‚
â”‚   Filter Chain       â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ Â¿EstÃ¡ autenticado?
       â”œâ”€â”€â”€ NO â”€â”€â”€â†’ Redirige a /login
       â”‚
       â””â”€â”€â”€ SÃ â”€â”€â”€â†’ Permite acceso


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                           PROCESO DE REGISTRO
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ USUARIO â”‚                    â”‚  AuthController  â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚                                  â”‚
     â”‚ GET /registro                    â”‚
     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’â”‚
     â”‚                                  â”‚
     â”‚        registro.html             â”‚
     â”‚â†â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
     â”‚                                  â”‚
     â”‚ Completa formulario              â”‚
     â”‚ (username, password)             â”‚
     â”‚                                  â”‚
     â”‚ POST /registro                   â”‚
     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’â”‚
     â”‚                                  â”‚
     â”‚                                  â”œâ”€â†’ Valida username Ãºnico
     â”‚                                  â”‚   â”œâ”€ conserjeRepository
     â”‚                                  â”‚   â”‚  .existsByUsername()
     â”‚                                  â”‚   â”‚
     â”‚                                  â”œâ”€â†’ Valida password >= 6
     â”‚                                  â”‚
     â”‚                                  â”œâ”€â†’ Hash password con BCrypt
     â”‚                                  â”‚   â”œâ”€ passwordEncoder.encode()
     â”‚                                  â”‚   â”‚  "admin123" â†’ 
     â”‚                                  â”‚   â”‚  "$2a$10$xBwS...Vm"
     â”‚                                  â”‚
     â”‚                                  â”œâ”€â†’ Crea Conserje
     â”‚                                  â”‚   â”œâ”€ Conserje.builder()
     â”‚                                  â”‚   â”œâ”€ .username("admin")
     â”‚                                  â”‚   â”œâ”€ .password(hash)
     â”‚                                  â”‚   â”œâ”€ .role("ROLE_CONSERJE")
     â”‚                                  â”‚   â””â”€ .build()
     â”‚                                  â”‚
     â”‚                                  â”œâ”€â†’ Guarda en BD
     â”‚                                  â”‚   â””â”€ conserjeRepository.save()
     â”‚                                  â”‚
     â”‚  Redirect to /login              â”‚
     â”‚  + mensaje Ã©xito                 â”‚
     â”‚â†â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
     â”‚                                  â”‚


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                            PROCESO DE LOGIN
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ USUARIO â”‚     â”‚ Spring        â”‚     â”‚ UserDetailsService â”‚     â”‚ Database â”‚
â”‚         â”‚     â”‚ Security      â”‚     â”‚ Impl               â”‚     â”‚          â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
     â”‚                  â”‚                       â”‚                      â”‚
     â”‚ GET /login       â”‚                       â”‚                      â”‚
     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’â”‚                       â”‚                      â”‚
     â”‚                  â”‚                       â”‚                      â”‚
     â”‚  Login form      â”‚                       â”‚                      â”‚
     â”‚â†â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                       â”‚                      â”‚
     â”‚                  â”‚                       â”‚                      â”‚
     â”‚ POST /login      â”‚                       â”‚                      â”‚
     â”‚ username=admin   â”‚                       â”‚                      â”‚
     â”‚ password=admin123â”‚                       â”‚                      â”‚
     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’â”‚                       â”‚                      â”‚
     â”‚                  â”‚                       â”‚                      â”‚
     â”‚                  â”‚ loadUserByUsername    â”‚                      â”‚
     â”‚                  â”‚ ("admin")             â”‚                      â”‚
     â”‚                  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’â”‚                      â”‚
     â”‚                  â”‚                       â”‚                      â”‚
     â”‚                  â”‚                       â”‚ findByUsername       â”‚
     â”‚                  â”‚                       â”‚ ("admin")            â”‚
     â”‚                  â”‚                       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’â”‚
     â”‚                  â”‚                       â”‚                      â”‚
     â”‚                  â”‚                       â”‚  Conserje entity     â”‚
     â”‚                  â”‚                       â”‚  {username, hash,    â”‚
     â”‚                  â”‚                       â”‚   role}              â”‚
     â”‚                  â”‚                       â”‚â†â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
     â”‚                  â”‚                       â”‚                      â”‚
     â”‚                  â”‚  UserDetails          â”‚                      â”‚
     â”‚                  â”‚  (Conserje)           â”‚                      â”‚
     â”‚                  â”‚â†â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                      â”‚
     â”‚                  â”‚                       â”‚                      â”‚
     â”‚                  â”‚ Compara passwords:    â”‚                      â”‚
     â”‚                  â”‚ BCrypt.matches(       â”‚                      â”‚
     â”‚                  â”‚   "admin123",         â”‚                      â”‚
     â”‚                  â”‚   "$2a$10$xBw..."     â”‚                      â”‚
     â”‚                  â”‚ )                     â”‚                      â”‚
     â”‚                  â”‚                       â”‚                      â”‚
     â”‚                  â”‚ Â¿Coinciden?           â”‚                      â”‚
     â”‚                  â”‚ â”œâ”€â”€â”€ NO â”€â”€â”€â†’ Error    â”‚                      â”‚
     â”‚                  â”‚ â”‚                     â”‚                      â”‚
     â”‚                  â”‚ â””â”€â”€â”€ SÃ â”€â”€â”€â†’ Crea     â”‚                      â”‚
     â”‚                  â”‚              sesiÃ³n   â”‚                      â”‚
     â”‚                  â”‚                       â”‚                      â”‚
     â”‚  Redirect to     â”‚                       â”‚                      â”‚
     â”‚  /menu-principal â”‚                       â”‚                      â”‚
     â”‚â†â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                       â”‚                      â”‚
     â”‚                  â”‚                       â”‚                      â”‚
     â”‚ + Cookie:        â”‚                       â”‚                      â”‚
     â”‚   JSESSIONID     â”‚                       â”‚                      â”‚
     â”‚                  â”‚                       â”‚                      â”‚


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                      ACCESO A RECURSOS PROTEGIDOS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ USUARIO â”‚     â”‚ Spring        â”‚     â”‚ SecurityFilter   â”‚
â”‚         â”‚     â”‚ Security      â”‚     â”‚ Chain            â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚                  â”‚                      â”‚
     â”‚ GET /menu-principal                     â”‚
     â”‚ + Cookie: JSESSIONID                    â”‚
     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’â”‚                      â”‚
     â”‚                  â”‚                      â”‚
     â”‚                  â”‚ Verifica sesiÃ³n      â”‚
     â”‚                  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’â”‚
     â”‚                  â”‚                      â”‚
     â”‚                  â”‚ Â¿Cookie vÃ¡lido?      â”‚
     â”‚                  â”‚ Â¿Usuario autenticado?â”‚
     â”‚                  â”‚                      â”‚
     â”‚                  â”‚      SÃ              â”‚
     â”‚                  â”‚â†â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
     â”‚                  â”‚                      â”‚
     â”‚  menu-principal.html                    â”‚
     â”‚  (con info del usuario)                 â”‚
     â”‚â†â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                      â”‚
     â”‚                  â”‚                      â”‚


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                           PROCESO DE LOGOUT
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ USUARIO â”‚     â”‚ Spring        â”‚
â”‚         â”‚     â”‚ Security      â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚                  â”‚
     â”‚ POST /logout     â”‚
     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’â”‚
     â”‚                  â”‚
     â”‚                  â”‚ 1. Invalida sesiÃ³n HTTP
     â”‚                  â”‚    session.invalidate()
     â”‚                  â”‚
     â”‚                  â”‚ 2. Elimina cookies
     â”‚                  â”‚    JSESSIONID
     â”‚                  â”‚
     â”‚                  â”‚ 3. Limpia SecurityContext
     â”‚                  â”‚
     â”‚  Redirect to     â”‚
     â”‚  /login?logout   â”‚
     â”‚â†â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
     â”‚                  â”‚
     â”‚  (Usuario ya NO  â”‚
     â”‚   autenticado)   â”‚
     â”‚                  â”‚


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                        ARQUITECTURA DE COMPONENTES
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

                         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                         â”‚   Navegador      â”‚
                         â”‚   (Usuario)      â”‚
                         â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â”‚
                                  â”‚ HTTP Request
                                  â†“
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  Spring Security        â”‚
                    â”‚  Filter Chain           â”‚
                    â”‚                         â”‚
                    â”‚  - AuthenticationFilter â”‚
                    â”‚  - AuthorizationFilter  â”‚
                    â”‚  - CsrfFilter          â”‚
                    â”‚  - SessionFilter        â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                                â”‚ Â¿Autenticado?
                                â†“
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚                                 â”‚
         NO   â”‚                                 â”‚ SÃ
              â†“                                 â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  Login/Registro â”‚           â”‚   Controller        â”‚
    â”‚  Endpoints      â”‚           â”‚   (AuthController,  â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚    etc.)            â”‚
                                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                             â”‚
                                             â†“
                                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                  â”‚   Service Layer      â”‚
                                  â”‚                      â”‚
                                  â”‚ UserDetailsService   â”‚
                                  â”‚                      â”‚
                                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                             â”‚
                                             â†“
                                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                  â”‚   Repository Layer   â”‚
                                  â”‚                      â”‚
                                  â”‚ ConserjeRepository   â”‚
                                  â”‚ (Spring Data JPA)    â”‚
                                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                             â”‚
                                             â†“
                                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                  â”‚   Database           â”‚
                                  â”‚   PostgreSQL         â”‚
                                  â”‚                      â”‚
                                  â”‚   Tabla: conserjes   â”‚
                                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                        FLUJO DE BCrypt PASSWORD HASHING
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

REGISTRO:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Password Original: "admin123"                                 â”‚
â”‚                                                                â”‚
â”‚  PasswordEncoder.encode("admin123")                            â”‚
â”‚         â”‚                                                      â”‚
â”‚         â†“                                                      â”‚
â”‚  1. Genera Salt aleatorio: "5PdKvF5YX9WKQm5O"                 â”‚
â”‚  2. Combina: "admin123" + salt                                â”‚
â”‚  3. Aplica BCrypt con factor 10 (2^10 = 1024 rondas)          â”‚
â”‚  4. Resultado:                                                 â”‚
â”‚     $2a$10$xBwSJz5PdKvF5YX9WKQm5OqJ8yZWZzJ5Lb6XvY8qYvC0vQXZ... â”‚
â”‚     â”‚  â”‚  â”‚  â”‚                â”‚                                â”‚
â”‚     â”‚  â”‚  â”‚  â”‚                â””â”€â†’ Hash final                   â”‚
â”‚     â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ Salt (22 chars)              â”‚
â”‚     â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ Factor de costo              â”‚
â”‚     â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ VersiÃ³n BCrypt               â”‚
â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ Identificador algoritmo      â”‚
â”‚                                                                â”‚
â”‚  Se guarda en BD: $2a$10$xBwSJz5PdKvF5YX9WKQm5OqJ8y...       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

LOGIN:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Usuario ingresa: "admin123"                                   â”‚
â”‚  BD tiene:        "$2a$10$xBwSJz5PdKvF5YX9WKQm5OqJ8y..."      â”‚
â”‚                                                                â”‚
â”‚  PasswordEncoder.matches("admin123", hashBD)                   â”‚
â”‚         â”‚                                                      â”‚
â”‚         â†“                                                      â”‚
â”‚  1. Extrae salt del hash: "5PdKvF5YX9WKQm5O"                  â”‚
â”‚  2. Hashea "admin123" con el MISMO salt                       â”‚
â”‚  3. Compara resultado con hash de BD                          â”‚
â”‚  4. Â¿Son iguales?                                             â”‚
â”‚     â”œâ”€ SÃ  â†’ AutenticaciÃ³n exitosa                           â”‚
â”‚     â””â”€ NO  â†’ Credenciales invÃ¡lidas                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                    ROLES Y CONTROL DE ACCESO (Futuro)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ROLE_CONSERJE   â”‚  â†’ Operaciones bÃ¡sicas
â”‚                  â”‚    - Check-in/Check-out
â”‚                  â”‚    - Ver reservas
â”‚                  â”‚    - Gestionar huÃ©spedes
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ROLE_ADMIN      â”‚  â†’ Todas las operaciones
â”‚                  â”‚    - Todo lo de CONSERJE
â”‚                  â”‚    + Gestionar usuarios
â”‚                  â”‚    + Ver reportes
â”‚                  â”‚    + ConfiguraciÃ³n sistema
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ConfiguraciÃ³n en SecurityConfig:
```java
.requestMatchers("/admin/**").hasRole("ADMIN")
.requestMatchers("/conserje/**").hasAnyRole("CONSERJE", "ADMIN")
```

```

---

**ğŸ¯ Resumen Visual:**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Registro â”‚ â†’ â”‚  Login   â”‚ â†’ â”‚  SesiÃ³n  â”‚ â†’ â”‚  Logout  â”‚
â”‚          â”‚    â”‚          â”‚    â”‚  Activa  â”‚    â”‚          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â†“               â†“               â†“               â†“
 Hash pwd       Verifica pwd    Cookie JSID    Invalida
  con BCrypt     con BCrypt      vÃ¡lido         sesiÃ³n
```

**TecnologÃ­as:**
- ğŸ” Spring Security
- ğŸ”’ BCrypt
- ğŸ’¾ PostgreSQL
- ğŸ—ï¸ Spring Data JPA
- ğŸ¨ Thymeleaf
- ğŸ› ï¸ Lombok
